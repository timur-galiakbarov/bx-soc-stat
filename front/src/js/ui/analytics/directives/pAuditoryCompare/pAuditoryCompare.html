<div class="card">
    <div class="card-header card-header-icon" data-background-color="blue">
        <i class="material-icons">face</i>
    </div>
    <div class="card-content">
        <h4 class="card-title">Пересечение аудиторий</h4>

        <div class="row" ng-show="model.isLoading">
            <div class="col-xs-12">
                <div class="progress progress-striped active m-top-m-15 spacer">
                    <div class="progress-bar progress-bar-info" ng-style="{width: model.progressPercent + '%'}">
                        {{model.progressPercent}}%
                    </div>
                </div>
            </div>
        </div>

        <div ng-hide="model.dataIsLoaded" rad-loader="model.isLoading">

            <div class="alert alert-c-info">
                Введите список групп по одной на каждой строчке или выберите из списка.
                Например, https://vk.com/pikabu
            </div>

            <div class="form-group no-margin">
                <label class="control-label">Введите список групп в это поле</label>
                <textarea class="form-control textarea1" rows="6" ng-model="model.groupsFirst"></textarea>
                <span class="material-input"></span>
            </div>

            <button class="btn btn-info btn-xs"
                    ng-show="!model.groupListShowed"
                    ng-click="toggleShowGroups()">Выбрать из списка
                <div class="ripple-container"></div>
            </button>
            <button class="btn btn-info btn-xs"
                    ng-show="model.groupListShowed"
                    ng-click="toggleShowGroups()">Скрыть список
                <div class="ripple-container"></div>
            </button>

            <rad-choose-group ng-show="model.groupListShowed" on-action="addGroup"></rad-choose-group>

            <div class="w100">
                <div class="form-group w140">
                    <label class="control-label">Одновременно состоят <br>хотя бы в </label>
                    <input class="form-control" ng-model="model.groupIntersectionCount" rad-numbers-only/>
                    <label class="control-label">сообществах</label>
                </div>
            </div>

            <div class="w100">
                <button class="btn btn-success"
                        ng-click="findCompares()" ng-disabled="model.isLoading">Найти пересечения
                    <div class="ripple-container"></div>
                </button>
            </div>

            <hr>

        </div>

        <div ng-show="model.dataIsLoaded">

            <button class="btn btn-info"
                    ng-click="model.dataIsLoaded = false">
                <i class="fa fa-arrow-circle-left"></i>
                Назад
                <div class="ripple-container"></div>
            </button>

            <div class="text-center">
                <h3>{{(model.intersectionList.length || 0) | radNumberFormatter}}</h3>
            </div>
            <div class="text-center">
                Пересечения
            </div>

            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-6 mb10 mt10" ng-repeat="group in model.groups">
                    <div class="group-mini-block">
                        <div class="g-av text-center">
                            <img ng-src="{{group.info.photoUrl}}"/>
                        </div>
                        <div class="g-txt text-center mt10">
                            {{group.info.name}}
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn btn-success" ng-click="getReport()">
                <i class="fa fa-download"></i>
                Скачать список в txt
                <div class="ripple-container"></div>
            </button>

            <div class="form-group no-margin" ng-if="model.intersection.length < 50000">
                <label class="control-label">Список идентификаторов пользователей</label>
                <textarea class="form-control textarea1" rows="6" ng-model="model.intersectionListView"></textarea>
                <span class="material-input"></span>
            </div>

            <div ng-if="model.intersection.length >= 50000">
                <div class="text-center">Мы скрыли поле со списком идентификаторов пользователей, чтобы ваш браузер не
                    завис.
                    <br/>Нажмите на
                    "Скачать список в txt", чтобы получить список.
                </div>
            </div>

        </div>

    </div>
</div>